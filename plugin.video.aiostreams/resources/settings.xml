<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<settings>
    <!-- General Settings -->
    <category label="General">
        <setting id="playback_settings" type="lsep" label="Playback Settings"/>
        <setting id="default_behavior" type="select" label="Default Behavior" values="play_first|show_streams" default="show_streams"/>
        <setting id="fallback_behavior" type="select" label="Fallback on Stream Failure" values="play_next|show_streams" default="show_streams" enable="eq(-1,play_first)"/>

        <setting id="quality_settings" type="lsep" label="Quality Settings"/>
        <setting id="preferred_quality" type="select" label="Preferred Quality" values="any|4k|1080p|720p|480p" default="any"/>
        <setting id="min_quality" type="select" label="Minimum Quality" values="240p|360p|480p|720p|1080p" default="480p"/>
        <setting id="filter_low_quality" type="bool" label="Hide Low Quality Streams" default="false"/>

        <setting id="subtitle_settings" type="lsep" label="Subtitle Settings"/>
        <setting id="subtitle_languages" type="text" label="Filter Subtitle Languages" default="" help="Enter comma-separated 3-letter country codes (e.g. eng, spa). Leave blank for all languages."/>

        <setting id="resume_settings" type="lsep" label="Resume &amp; Progress"/>
        <setting id="auto_resume" type="bool" label="Auto Resume Playback" default="true"/>
        <setting id="auto_mark_watched_percent" type="number" label="Mark Watched at %" default="90"/>

        <setting id="autoplay_settings" type="lsep" label="UpNext Integration"/>
        <setting id="autoplay_next_episode" type="bool" label="Signal UpNext (Kodi script.service.upnext)" default="true"/>
    </category>

    <!-- Integrations Settings -->
    <category label="Integrations">
        <setting id="aiostreams_config" type="lsep" label="AIOStreams Integration"/>
        <setting id="aiostreams_host" type="text" label="Host Base URL" default="https://aiostreams.elfhosted.com"/>
        <setting id="aiostreams_uuid" type="text" label="UUID" default=""/>
        <setting id="aiostreams_password" type="text" label="Password" default="" option="hidden"/>
        <setting id="retrieve_manifest" type="action" label="Retrieve Manifest" action="RunPlugin(plugin://plugin.video.aiostreams/?action=retrieve_manifest)"/>
        <setting id="base_url" type="text" label="Manifest URL" default=""/>
        <setting id="timeout" type="number" label="Request Timeout (seconds)" default="10"/>

        <setting id="trakt_config" type="lsep" label="Trakt Integration"/>
        <setting id="trakt_client_id" type="text" label="Client ID" default=""/>
        <setting id="trakt_client_secret" type="text" label="Client Secret" default="" option="hidden"/>
        <setting id="trakt_authorize" type="action" label="Authorize Trakt" action="RunPlugin(plugin://plugin.video.aiostreams/?action=trakt_auth)"/>
        <setting id="trakt_revoke" type="action" label="Revoke Authorization" action="RunPlugin(plugin://plugin.video.aiostreams/?action=trakt_revoke)"/>

        <setting id="trakt_sync" type="lsep" label="Sync Settings"/>
        <setting id="trakt_sync_auto" type="bool" label="Enable Auto-Sync (Background Service)" default="true"/>

        <setting id="trakt_features" type="lsep" label="Trakt Features"/>
        <setting id="trakt_scrobble" type="bool" label="Enable Scrobbling" default="true"/>
        <setting id="trakt_auto_mark_watched" type="bool" label="Auto-Mark as Watched (90%+)" default="true"/>

        <setting id="trakt_hidden" type="lsep" label="Hidden Settings" visible="false"/>
        <setting id="trakt_token" type="text" label="Access Token" default="" visible="false"/>
        <setting id="trakt_refresh" type="text" label="Refresh Token" default="" visible="false"/>
        <setting id="trakt_expires" type="text" label="Token Expires" default="0" visible="false"/>
        <setting id="trakt.username" type="text" label="Username" default="" visible="false"/>
    </category>

    <!-- UI Settings -->
    <category label="User Interface">
        <setting id="ui_enhancements" type="lsep" label="Display Options"/>
        <setting id="show_progress_bars" type="bool" label="Show Progress Bars" default="true"/>
        <setting id="color_code_items" type="bool" label="Color Code by Watch Status" default="true"/>
        <setting id="show_quality_badges" type="bool" label="Show Quality Badges" default="true"/>
        <setting id="show_reliability_icons" type="bool" label="Show Reliability Icons" default="true"/>
        <setting id="learn_preferences" type="bool" label="Learn Stream Preferences" default="true"/>
    </category>

    <!-- Advanced Settings -->
    <category label="Advanced">
        <setting id="performance" type="lsep" label="Performance"/>
        <setting id="cache_expiry_hours" type="number" label="Cache Expiry (hours)" default="24"/>
        <setting id="max_streams_to_show" type="number" label="Max Streams to Display" default="20"/>
        <setting id="stream_test_timeout" type="number" label="Stream Test Timeout (sec)" default="5"/>

        <setting id="debug" type="lsep" label="Debug"/>
        <setting id="debug_logging" type="bool" label="Enable Debug Logging" default="false"/>

        <setting id="maintenance" type="lsep" label="Maintenance"/>
        <setting id="refresh_manifest_cache" type="action" label="Refresh Manifest Cache" action="RunPlugin(plugin://plugin.video.aiostreams/?action=refresh_manifest_cache)"/>
        <setting id="database_reset" type="action" label="Database Reset" action="RunPlugin(plugin://plugin.video.aiostreams/?action=database_reset)"/>
        <setting id="show_database_info" type="action" label="Show Database Info" action="RunPlugin(plugin://plugin.video.aiostreams/?action=show_database_info)"/>
        <setting id="clear_stream_stats" type="action" label="Clear Stream Statistics" action="RunPlugin(plugin://plugin.video.aiostreams/?action=clear_stream_stats)"/>
        <setting id="clear_preferences" type="action" label="Clear Learned Preferences" action="RunPlugin(plugin://plugin.video.aiostreams/?action=clear_preferences)"/>
        <setting id="clear_clearlogo_cache" type="action" label="Clear Clearlogo Cache" action="RunPlugin(plugin://plugin.video.aiostreams/?action=clear_clearlogos)"/>
        <setting id="test_connection" type="action" label="Test AIOStreams Connection" action="RunPlugin(plugin://plugin.video.aiostreams/?action=test_connection)"/>
    </category>

    <!-- Filter Settings -->
    <category label="Filters">
        <setting id="filter_rating_enabled" type="bool" label="Enable Rating Filters" default="false"/>
        <setting id="filter_ratings" type="lsep" label="Hide Ratings"/>
        <setting id="filter_rating_g" type="bool" label="G" default="false" enable="eq(-2,true)"/>
        <setting id="filter_rating_pg" type="bool" label="PG" default="false" enable="eq(-3,true)"/>
        <setting id="filter_rating_pg_13" type="bool" label="PG-13" default="false" enable="eq(-4,true)"/>
        <setting id="filter_rating_r" type="bool" label="R" default="false" enable="eq(-5,true)"/>
        <setting id="filter_rating_nc_17" type="bool" label="NC-17" default="false" enable="eq(-6,true)"/>
        <setting id="filter_rating_tv_y" type="bool" label="TV-Y" default="false" enable="eq(-7,true)"/>
        <setting id="filter_rating_tv_y7" type="bool" label="TV-Y7" default="false" enable="eq(-8,true)"/>
        <setting id="filter_rating_tv_g" type="bool" label="TV-G" default="false" enable="eq(-9,true)"/>
        <setting id="filter_rating_tv_pg" type="bool" label="TV-PG" default="false" enable="eq(-10,true)"/>
        <setting id="filter_rating_tv_14" type="bool" label="TV-14" default="false" enable="eq(-11,true)"/>
        <setting id="filter_rating_tv_ma" type="bool" label="TV-MA" default="false" enable="eq(-12,true)"/>
    </category>
</settings>
